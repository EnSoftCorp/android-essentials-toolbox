Android Essentials Toolbox
==========================

The Android Essentials Toolbox is an Atlas toolbox containing logic for Android Permissions, Manifest, and other Android domain specific logic useful in program analysis.

For more details see [https://ensoftcorp.github.io/android-essentials-toolbox](https://ensoftcorp.github.io/android-essentials-toolbox).

## Overview
This feature contains encoded mappings recovered from the Android source code (as of API version 19) to map [Protection Levels](https://developer.android.com/guide/topics/manifest/permission-element.html#plevel) and [Permission Groups](https://developer.android.com/guide/topics/manifest/permission-element.html#pgroup) to the corresponding [manifest permissions](https://developer.android.com/guide/topics/manifest/permission-element.html).  Permission details (simple name, quaified name, description, etc.) are encoded from information found in the [Google documentation](https://developer.android.com/reference/android/Manifest.permission.html). Using the [University of Toronto's PScout utility](http://pscout.csl.toronto.edu/) this feature also includes mappings from permissions to Android permission restricted API methods.

## Setup
The `toolbox.android.essentials` project is an Eclipse plugin that can be installed into the Eclipse environment.  To install the Eclipse plugin from the workspace right click on the project and navigate to `Export`->`Plug-in Development`->`Deployable plug-ins and fragments`.  Select `Next` and make sure only the `toolbox.android.essentials` project is selected.  Then select the `Install into host.` radio and click `Finish`.  You will need to restart Eclipse.

Alternatively if you have a toolbox project that depends on the Android Essentials Toolbox keeping both projects in the workspace is enough, but you should note that confusion may occur if there is an installed version and a version in the workspace.  The Atlas interpreter tends to give priority to the version in the workspace.

## Example Usage

    int apiVersion = 19;
    PermissionMapping.applyTags(apiVersion);
    Q internetRestrictedAPIs = PermissionMapping.getMethods(Permission.INTERNET, apiVersion);
    long numMethods = CommonQueries.nodeSize(internetRestrictedAPIs);
    System.out.println("There are " + numMethods + " restricted methods for " + Permission.INTERNET.getQualifiedName());

## Maintenance
This section provids some tips on performing maintenance on this project.

### Updating Permissions and Permission Mappings
The Permission, PermissionGroup, and ProtectionLevel objects are primarily generated by scraping together information available in the online Android documentation and the AndroidManifest.xml file found in the Android source.  Using both sources alows us to gather both documented and undocumented permissions information.  The partial code generators are located in the `AndroidPermissionObjectGenerator` Eclipse project, which has a project dependency on the `com.ensoftcorp.open.android.essentials` project.  The primary resources are listed below.

- https://developer.android.com/reference/android/Manifest.permission.html
- https://developer.android.com/reference/android/Manifest.permission_group.html
- https://developer.android.com/guide/topics/manifest/permission-element.html
- https://developer.android.com/reference/android/content/pm/PermissionInfo.html
- https://raw.githubusercontent.com/android/platform_frameworks_base/master/core/res/AndroidManifest.xml

#### Updating Permissions
TODO

#### Updating Permission Groups and Mappings
TODO

#### Updating Protection Levels and Mappings
TODO

#### Updating Protected API Method Permission Mappings
TODO
